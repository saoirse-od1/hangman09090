<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentence Hangman Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #1e1e2f;
            color: #ffffff;
            text-align: center;
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }

        .canvas-container {
            display: flex;
            flex-wrap: nowrap;
            justify-content: flex-start;
            gap: 20px;
            margin: 20px 0;
            max-width: 100%;
            padding-left: 20px;
        }

        .horizontal-scroll {
            overflow-x: scroll;
            max-width: 90vw;
            margin-bottom: 20px;
        }

        .hangmanCanvas {
            border: 2px solid #ffcc00;
            background-color: #2b2b40;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.6);
            border-radius: 10px;
            flex: 0 0 auto;
            transition: transform 0.3s, border-color 0.3s;
        }

        .hangmanCanvas.active {
            transform: scale(1.1);
            border-color: #00ff00;
        }

        #sentenceDisplay {
            font-size: 24px;
            margin: 30px 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            max-width: 90vw;
        }

        .wordDisplay {
            cursor: pointer;
            padding: 8px 10px;
            border: 2px solid #ffcc00;
            border-radius: 8px;
            background-color: #3b3b52;
            transition: background-color 0.3s, color 0.3s;
        }

        .wordDisplay.active {
            background-color: #ffcc00;
            color: #1e1e2f;
        }

        #letters {
            margin-top: 30px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 90vw;
            gap: 10px;
        }

        .letter-btn {
            display: inline-block;
            margin: 5px;
            padding: 10px;
            background-color: #ffcc00;
            color: #1e1e2f;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.3s, transform 0.3s;
        }

        .letter-btn:hover:not(:disabled) {
            background-color: #e6b800;
            transform: scale(1.1);
        }

        .letter-btn:disabled {
            background-color: #444;
            color: #999;
            cursor: not-allowed;
        }

        .wildcard-keyboard {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #444;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
            animation: rainbowGlow 1s infinite alternate;
        }

        .wildcard-key {
            display: inline-block;
            margin: 5px;
            padding: 15px;
            background-color: #ffcc00;
            color: #1e1e2f;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.3s, transform 0.3s;
        }

        .wildcard-key:hover {
            transform: scale(1.1);
        }

        .wildcard-message {
            display: none;
            font-size: 48px;
            font-weight: bold;
            margin-top: 20px;
            color: #ffffff;
            animation: flashText 1s infinite alternate;
        }

        .guess-word-container {
            margin-top: 20px;
        }

        .guess-word-input {
            padding: 10px;
            font-size: 18px;
            border-radius: 8px;
            border: none;
            margin-right: 10px;
        }

        .guess-word-btn {
            padding: 10px 15px;
            font-size: 18px;
            background-color: #e63946;
            color: #ffffff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .guess-word-btn:hover {
            background-color: #d32f2f;
        }

        .devil-message {
            font-size: 24px;
            color: #e63946;
            margin-top: 10px;
        }

        .rules-popup, .game-over-popup, .win-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #2b2b40;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
            color: #ffcc00;
            max-width: 80vw;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 10;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #e63946;
            color: #ffffff;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            width: 30px;
            height: 30px;
            font-size: 18px;
            line-height: 30px;
            text-align: center;
        }

        .question-mark {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: #ffcc00;
            color: #1e1e2f;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            width: 40px;
            height: 40px;
            font-size: 24px;
            line-height: 40px;
            text-align: center;
            z-index: 5;
        }

        @keyframes rainbowGlow {
            0% { background-color: #ff0000; }
            20% { background-color: #ff7f00; }
            40% { background-color: #ffff00; }
            60% { background-color: #00ff00; }
            80% { background-color: #0000ff; }
            100% { background-color: #8b00ff; }
        }

        @keyframes flashText {
            0% { color: #ff0000; }
            20% { color: #ff7f00; }
            40% { color: #ffff00; }
            60% { color: #00ff00; }
            80% { color: #0000ff; }
            100% { color: #8b00ff; }
        }

        h1 {
            font-size: 48px;
            margin-bottom: 20px;
            color: #ffcc00;
        }
    </style>
</head>
<body>
    <h1>Sentence Hangman Game</h1>
    <button id="questionMark" class="question-mark">?</button>
    <div id="rulesPopup" class="rules-popup">
        <button id="closeRules" class="close-btn">&times;</button>
        <h2>Game Rules</h2>
        <p>1. Select a word by clicking on it to start guessing letters for that word.</p>
        <p>2. You can guess letters by clicking on the buttons below the sentence.</p>
        <p>3. If you guess the correct letters, they will be revealed in the word.</p>
        <p>4. Each word has a maximum of 6 incorrect attempts before the hangman is complete.</p>
        <p>5. You can guess the entire word at any point using the input box below the sentence.</p>
        <p>6. If you guess a word correctly and it is longer than 4 letters, and you haven't already guessed more than two letters, you earn a Wild Card.</p>
        <p>7. If you guess a word incorrectly, you get a devil. Two devils and you're out.</p>
        <p>8. The game ends when all words are guessed correctly or you reach two devils.</p>
    </div>

    <div id="gameOverPopup" class="game-over-popup">
        <button id="closeGameOver" class="close-btn">&times;</button>
        <h2>Game Over</h2>
        <p id="gameOverMessage"></p>
    </div>

    <div id="winPopup" class="win-popup">
        <button id="closeWin" class="close-btn">&times;</button>
        <h2>Congratulations!</h2>
        <p>You've guessed the entire sentence correctly!</p>
    </div>
 
    <div id="sentenceDisplay"></div>
    <div class="horizontal-scroll" id="horizontalScroll">
        <div class="canvas-container" id="canvasContainer"></div>
    </div>
    <div id="letters"></div>

    <div class="guess-word-container">
        <input type="text" id="guessWordInput" class="guess-word-input" placeholder="Guess the full word">
        <button id="guessWordBtn" class="guess-word-btn">Guess Word</button>
    </div>
    <div id="devilMessage" class="devil-message"></div>

    <div id="wildcardKeyboard" class="wildcard-keyboard"></div>
    <div id="wildcardMessage" class="wildcard-message">WILDCARD!</div>

        <audio id="correctGuessSound" src="correct-guess.mp3"></audio>
    <audio id="wrongGuessSound" src="wrong-guess.mp3"></audio>
    <audio id="gameOverSound" src="game-over.mp3"></audio>
    <audio id="winSound" src="win.mp3"></audio>
  <audio id="devilSound" src="devil-sound.mp3"></audio>
    <audio id="wildcardSound" src="wildcard-sound.mp3"></audio>

    <script>
        const sentences = [
            "oh katie my wise test subject for the first ever offical round of this game i hope you enjoy"
        ];
        let chosenSentence = sentences[Math.floor(Math.random() * sentences.length)].toUpperCase();
        let words = chosenSentence.split(' ');
        let guessedLetters = [];
        let remainingAttemptsPerWord = Array(words.length).fill(6);
        let currentWordIndex = 0;
        let wildCardAvailable = false;
        let devils = 0;

        const canvasContainer = document.getElementById('canvasContainer');
        const horizontalScroll = document.getElementById('horizontalScroll');
        const devilMessage = document.getElementById('devilMessage');
        const rulesPopup = document.getElementById('rulesPopup');
        const questionMark = document.getElementById('questionMark');
        const closeRules = document.getElementById('closeRules');
        const gameOverPopup = document.getElementById('gameOverPopup');
        const closeGameOver = document.getElementById('closeGameOver');
        const winPopup = document.getElementById('winPopup');
        const closeWin = document.getElementById('closeWin');
        const gameOverMessage = document.getElementById('gameOverMessage');
                const correctGuessSound = document.getElementById('correctGuessSound');
        const wrongGuessSound = document.getElementById('wrongGuessSound');
        const gameOverSound = document.getElementById('gameOverSound');
        const devilSound = document.getElementById('devilSound');
        const wildcardSound = document.getElementById('wildcardSound');
        const winSound = document.getElementById('winSound');

        
        questionMark.addEventListener('click', () => {
            rulesPopup.style.display = 'block';
        });

        closeRules.addEventListener('click', () => {
            rulesPopup.style.display = 'none';
        });

        closeGameOver.addEventListener('click', () => {
            gameOverPopup.style.display = 'none';
            window.location.reload();
        });

        closeWin.addEventListener('click', () => {
            winPopup.style.display = 'none';
            window.location.reload();
        });

        function drawStand(canvasIndex) {
            const canvas = document.getElementById(`hangmanCanvas${canvasIndex}`);
            const ctx = canvas.getContext('2d');
            // Pre-draw the stand
            ctx.strokeStyle = '#ffcc00';
            ctx.lineWidth = 4;
            ctx.strokeRect(10, 140, 60, 10); // Base
            ctx.beginPath();
            ctx.moveTo(40, 140);
            ctx.lineTo(40, 20);
            ctx.stroke(); // Pole
            ctx.beginPath();
            ctx.moveTo(40, 20);
            ctx.lineTo(100, 20);
            ctx.stroke(); // Top Beam
            ctx.beginPath();
            ctx.moveTo(100, 20);
            ctx.lineTo(100, 50);
            ctx.stroke(); // Rope
        }

        function drawHangman(attempts, canvasIndex) {
            const canvas = document.getElementById(`hangmanCanvas${canvasIndex}`);
            const ctx = canvas.getContext('2d');
            ctx.strokeStyle = '#e63946';
            ctx.lineWidth = 3;
            // Drawing parts based on remaining attempts
            if (attempts <= 5) {
                ctx.beginPath();
                ctx.arc(100, 70, 15, 0, Math.PI * 2);
                ctx.stroke(); // Head
            }
            if (attempts <= 4) {
                ctx.beginPath();
                ctx.moveTo(100, 85);
                ctx.lineTo(100, 110);
                ctx.stroke(); // Body
            }
            if (attempts <= 3) {
                ctx.beginPath();
                ctx.moveTo(100, 90);
                ctx.lineTo(80, 100);
                ctx.stroke(); // Left Arm
            }
            if (attempts <= 2) {
                ctx.beginPath();
                ctx.moveTo(100, 90);
                ctx.lineTo(120, 100);
                ctx.stroke(); // Right Arm
            }
            if (attempts <= 1) {
                ctx.beginPath();
                ctx.moveTo(100, 110);
                ctx.lineTo(80, 130);
                ctx.stroke(); // Left Leg
            }
            if (attempts === 0) {
                ctx.beginPath();
                ctx.moveTo(100, 110);
                ctx.lineTo(120, 130);
                ctx.stroke(); // Right Leg
            }
        }

        function updateSentenceDisplay() {
            const sentenceDisplay = document.getElementById('sentenceDisplay');
            sentenceDisplay.innerHTML = '';
            words.forEach((word, index) => {
                const wordSpan = document.createElement('span');
                wordSpan.classList.add('wordDisplay');
                wordSpan.textContent = word.split('').map(letter => guessedLetters.includes(letter + index) ? letter : '_').join(' ');
                wordSpan.addEventListener('click', () => setCurrentWord(index));
                if (index === currentWordIndex) {
                    wordSpan.classList.add('active');
                }
                sentenceDisplay.appendChild(wordSpan);
            });
        }

        function checkGameStatus() {
            if (remainingAttemptsPerWord.some(attempts => attempts <= 0) || devils >= 2) {
                setTimeout(() => {
                    gameOverMessage.textContent = "The sentence was: " + chosenSentence;
                    gameOverPopup.style.display = 'block';
                    gameOverSound.play();
                }, 100);
            } else if (words.every((word, index) => word.split('').every(letter => guessedLetters.includes(letter + index)))) {
                setTimeout(() => {
                    winPopup.style.display = 'block';
                    winSound.play();
                }, 100);
            }
        }

        function createLetterButtons() {
            const lettersDiv = document.getElementById('letters');
            for (let i = 65; i <= 90; i++) {
                const letterButton = document.createElement('button');
                letterButton.textContent = String.fromCharCode(i);
                letterButton.classList.add('letter-btn');
                letterButton.addEventListener('click', function () {
                    const letter = this.textContent;
                    guessedLetters.push(letter + currentWordIndex);
                    this.disabled = true;
                    if (words[currentWordIndex].includes(letter)) {
                        updateSentenceDisplay();
                        correctGuessSound.play();
                        if (words[currentWordIndex].length > 4 && words[currentWordIndex].split('').every(letter => guessedLetters.includes(letter + currentWordIndex))) {
                            wildCardAvailable = true;
                            alert("You've earned a Wild Card letter! Use it wisely.");
                showWildCardKeyboard();
                wildcardSound.play();
                        }
                    } else {
                        remainingAttemptsPerWord[currentWordIndex]--;
                        drawHangman(remainingAttemptsPerWord[currentWordIndex], currentWordIndex);
                        wrongGuessSound.play();
                    }
                    checkGameStatus();
                });
                lettersDiv.appendChild(letterButton);
            }
        }

        function createCanvasForWords() {
            const spacer = document.createElement('div');
            spacer.style.width = '150px'; // Add extra space to the beginning
            canvasContainer.appendChild(spacer);

            words.forEach((_, index) => {
                const canvas = document.createElement('canvas');
                canvas.id = `hangmanCanvas${index}`;
                canvas.classList.add('hangmanCanvas');
                canvas.width = 150;
                canvas.height = 150;
                canvasContainer.appendChild(canvas);
                drawStand(index);
            });
            if (words.length > 7) {
                horizontalScroll.style.display = 'block';
            }
        }

        function setCurrentWord(wordIndex) {
            currentWordIndex = wordIndex;
            updateSentenceDisplay();
            const buttons = document.querySelectorAll('.letter-btn');
            buttons.forEach(button => button.disabled = false);
            guessedLetters.forEach(guessed => {
                if (guessed.endsWith(currentWordIndex)) {
                    buttons.forEach(button => {
                        if (button.textContent === guessed[0]) {
                            button.disabled = true;
                        }
                    });
                }
            });

            // Scroll to the corresponding hangman stand
            const targetCanvas = document.getElementById(`hangmanCanvas${wordIndex}`);
            horizontalScroll.scrollTo({ left: targetCanvas.offsetLeft - 50, behavior: 'smooth' });

            // Highlight the selected hangman stand
            document.querySelectorAll('.hangmanCanvas').forEach(canvas => canvas.classList.remove('active'));
            targetCanvas.classList.add('active');
        }

        function useWildCard(letter) {
            const buttons = document.querySelectorAll('.letter-btn');
            buttons.forEach(button => {
                if (button.textContent === letter) {
                    button.disabled = true;
                    button.style.backgroundColor = '#ff69b4'; // Change to pink to indicate used wildcard
                    button.style.color = '#1e1e2f';
                }
            });
            words.forEach((word, index) => {
                word.split('').forEach((char, charIndex) => {
                    if (char === letter && !guessedLetters.includes(char + index)) {
                        guessedLetters.push(char + index);
                    }
                });
            });
            guessedLetters.push(letter);
            updateSentenceDisplay();
            checkGameStatus();
            hideWildCardKeyboard();
        
            checkGameStatus();
            hideWildCardKeyboard();
        }

        function showWildCardKeyboard() {
            const wildcardKeyboard = document.getElementById('wildcardKeyboard');
            wildcardKeyboard.innerHTML = '';
            wildcardKeyboard.style.display = 'block';
            document.getElementById('wildcardMessage').style.display = 'block';
            for (let i = 65; i <= 90; i++) {
                const letterButton = document.createElement('button');
                letterButton.textContent = String.fromCharCode(i);
                letterButton.classList.add('wildcard-key');
                letterButton.addEventListener('click', function () {
                    useWildCard(this.textContent);
                });
                wildcardKeyboard.appendChild(letterButton);
            }
        }

        function hideWildCardKeyboard() {
            const wildcardKeyboard = document.getElementById('wildcardKeyboard');
            wildcardKeyboard.style.display = 'none';
            document.getElementById('wildcardMessage').style.display = 'none';
        }

        function guessFullWord() {
            const guessWordInput = document.getElementById('guessWordInput').value.toUpperCase();
            if (guessWordInput === words[currentWordIndex]) {
                if (words[currentWordIndex].length > 4 && guessedLetters.filter(letter => letter.endsWith(currentWordIndex)).length <= 2) {
                    wildCardAvailable = true;
                    alert("You've earned a Wild Card letter! Use it wisely.");
                    showWildCardKeyboard();
                }
                guessedLetters.push(...words[currentWordIndex].split('').map(letter => letter + currentWordIndex));
                updateSentenceDisplay();
                correctGuessSound.play();
            } else {
                devils++;
                devilMessage.textContent = `Devils: ${devils} / 2`;
                wrongGuessSound.play();
                devilSound.play();
            }
            checkGameStatus();
        }

        document.getElementById('guessWordBtn').addEventListener('click', guessFullWord);

        // Initialize Game
        createCanvasForWords();
        updateSentenceDisplay();
        createLetterButtons();
        setCurrentWord(0); // Start with the first word
    </script>
    
</body>
</html>
